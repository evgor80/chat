import{_ as V}from"./CardComponent.vue_vue_type_style_index_0_lang-5b0029ab.js";import{d as r,o as l,c as m,f as u,t as x,j as D,k as b,n as j,u as _,C as H,a as i,b as C,w as A,r as F,F as S,D as z,g as c,i as L,e as k,T as J,q as O,v as M,E as P,x as G,y as q,m as B,l as Q,p as X,z as Y}from"./index-8b280c30.js";import{_ as Z,a as ee,u as ae}from"./useAxios-5e6bb7b6.js";import{e as K,b as I,p as W,_ as se}from"./LoaderComponent.vue_vue_type_style_index_0_lang-07c726db.js";import{u as te,a as ne}from"./useBlurHandle-29fc9f62.js";import{_ as le,a as oe}from"./CardDivider.vue_vue_type_style_index_0_lang-d3f03ffa.js";import"./_plugin-vue_export-helper-c27b6911.js";const me={class:"chat__head"},ie={class:"chat__name"},ue={class:"chat__info"},re=u("i",{class:"fa fa-users"},null,-1),ce=u("i",{class:"fa fa-comment"},null,-1),_e=r({__name:"RoomHead",props:{members:null,room:null,msgNum:null},setup(a){return(s,e)=>{var t,n;return l(),m("div",me,[u("div",ie,[u("span",null,x((t=a.room)==null?void 0:t.name),1)]),u("div",ue,[u("span",null,[re,D(" "+x(a.members?a.members.length:(n=a.room)==null?void 0:n.members)+" / ",1),ce,D(" "+x(a.msgNum),1)])])])}}});function de(a){const s=["##99ccff","#99ffff","#ffdb4d","#b3ff66","#66ff66","#80b3ff","#ff66b3","#ff66a3","#a366ff","#66ffb3"];let e=0;return a.split("").map(t=>e+=t.charCodeAt(0)),e=e%10,{backgroundColor:s[e]}}const ve={class:"msg__author__name"},ge=r({__name:"MessageAuthor",props:{author:null,isOnline:{type:Boolean}},setup(a){const s=a,e=b(()=>s.isOnline?"msg__author__status--online":"msg__author__status--offline");return(t,n)=>(l(),m("div",{class:"msg__author",style:H(_(de)(a.author.username))},[u("span",null,x(a.author.username.charAt(0).toUpperCase()),1),u("div",ve,x(a.author.username),1),u("div",{class:j(["msg__author__status",_(e)])},null,2)],4))}});const pe=["innerHTML"],fe=r({__name:"MessageText",props:{text:null,isAuthor:{type:Boolean}},setup(a){const s=a,e=b(()=>s.isAuthor?" msg__text--mine":"msg__text--their");return(t,n)=>(l(),m("div",{class:j(["msg__text",_(e)]),innerHTML:a.text},null,10,pe))}});function ye(a){if(!a)return"";const s=new Date(a),e=Math.floor((Date.now().valueOf()-s.valueOf())/1e3/86400),t=(new Date().getTime()-s.valueOf())/1e3;return isNaN(e)||e<0?"":e===0&&(t<60&&"Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ñ‚Ð¾"||t<120&&"Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ Ð½Ð°Ð·Ð°Ð´"||t<3600&&Math.floor(t/60)+" Ð¼Ð¸Ð½. Ð½Ð°Ð·Ð°Ð´"||t<7200&&"Ñ‡Ð°Ñ Ð½Ð°Ð·Ð°Ð´"||t<86400&&Math.floor(t/3600)+" Ñ‡Ð°Ñ. Ð½Ð°Ð·Ð°Ð´")||e===1&&"Ð´ÐµÐ½ÑŒ Ð½Ð°Ð·Ð°Ð´"||e<5&&e+" Ð´Ð½Ñ Ð½Ð°Ð·Ð°Ð´"||e<7&&e+" Ð´Ð½ÐµÐ¹ Ð½Ð°Ð·Ð°Ð´"||e<14&&"Ð½ÐµÐ´ÐµÐ»ÑŽ Ð½Ð°Ð·Ð°Ð´"||e<21&&"2 Ð½ÐµÐ´ÐµÐ»Ð¸ Ð½Ð°Ð·Ð°Ð´"||e<31&&"3 Ð½ÐµÐ´ÐµÐ»Ð¸ Ð½Ð°Ð·Ð°Ð´"||e===31&&e+" Ð¼ÐµÑÑÑ† Ð½Ð°Ð·Ð°Ð´"||e<365&&Math.floor(e/31)+" Ð¼ÐµÑ. Ð½Ð°Ð·Ð°Ð´"||e===365&&"Ð³Ð¾Ð´ Ð½Ð°Ð·Ð°Ð´"||e>365&&"Ð±Ð¾Ð»ÑŒÑˆÐµ Ð³Ð¾Ð´Ð° Ð½Ð°Ð·Ð°Ð´"}const he={class:"msg__time"},be=r({__name:"MessageTime",props:{createdAt:null},setup(a){return(s,e)=>(l(),m("div",he,[u("span",null,x(_(ye)(a.createdAt)),1)]))}});const xe=r({__name:"MessageComponent",props:{message:null,members:null},setup(a){const s=a,e=localStorage.user,t=b(()=>s.members?s.members.includes(s.message.author.username):!1),n=b(()=>s.message.author.username===e),d=b(()=>n.value?"msg__message--mine":""),h=b(()=>n.value?"msg__body--mine":"");return(y,f)=>(l(),m("div",{class:j(["msg__message",_(d)])},[i(ge,{author:a.message.author,isOnline:_(t)},null,8,["author","isOnline"]),u("div",{class:j(["msg__body",_(h)])},[i(fe,{text:a.message.text,isAuthor:_(n)},null,8,["text","isAuthor"]),i(be,{createdAt:a.message.created_at},null,8,["createdAt"])],2)],2))}});const $e={class:"msg__notification"},we=r({__name:"InfoMessage",props:{message:null},setup(a){return(s,e)=>(l(),m("div",$e,[u("span",null,x(a.message.user)+" "+x(a.message.type==="join"?"Ð²Ñ…Ð¾Ð´Ð¸Ñ‚ Ð²":"Ð¿Ð¾ÐºÐ¸Ð´Ð°ÐµÑ‚")+" Ñ‡Ð°Ñ‚ ",1)]))}});const ke={class:"msg"},je=r({__name:"MessageItem",props:{message:null,members:null},setup(a){return(s,e)=>(l(),m("li",ke,[a.message.type==="message"?(l(),C(xe,{key:0,message:a.message,members:a.members},null,8,["message","members"])):(l(),C(we,{key:1,message:a.message},null,8,["message"]))]))}}),Ce=r({__name:"MessageList",props:{messages:null,members:null},setup(a){return(s,e)=>(l(),C(z,{name:"list",class:"message-list",tag:"ul"},{default:A(()=>[(l(!0),m(S,null,F(a.messages,t=>(l(),C(je,{key:t.id,message:t,members:a.members},null,8,["message","members"]))),128))]),_:1}))}});const Me=["value"],Te=r({__name:"NewMessageTextarea",props:{value:null},setup(a,{expose:s}){const e=c();return s({textRef:e}),(t,n)=>(l(),m("textarea",{ref_key:"textRef",ref:e,name:"newMessage",id:"newMessage",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",value:a.value,onInput:n[0]||(n[0]=d=>t.$emit("changed",d.target.value))},null,40,Me))}}),Ne=["disabled"],Ee=u("i",{class:"fa fa-paper-plane"},null,-1),Ae=[Ee],Se=r({__name:"NewMessageButton",props:{isActive:{type:Boolean}},setup(a){const s=a,e=b(()=>s.isActive?"":"new-msg-form__submit-btn--disabled");return(t,n)=>(l(),m("button",{onClick:n[0]||(n[0]=d=>t.$emit("clicked")),class:j(["new-msg-form__submit-btn",_(e)]),"aria-label":"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",disabled:!a.isActive},Ae,10,Ne))}});const Be="/dist/emojis/7.png",Le=r({__name:"EmojisButton",props:{isWindowOpened:{type:Boolean}},setup(a){const s=a,e=b(()=>s.isWindowOpened?"new-msg-form__emoji--active":"");return(t,n)=>(l(),m("button",{class:"new-msg-form__emoji-btn",onClick:n[0]||(n[0]=d=>t.$emit("clicked")),"aria-label":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ÑÐ¼Ð¾Ð´Ð·Ð¸"},[u("img",{class:j(["new-msg-form__emoji",_(e)]),src:Be,alt:"ðŸ™‚"},null,2)]))}});const Oe=[{name:"ÑÐ¼ÐµÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼Ð¸ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸",alt:"ðŸ˜ƒ"},{name:"Ñ…Ð¾Ñ…Ð¾Ñ‡ÑƒÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾ ÑÐ¾ ÑÐ¼ÐµÑŽÑ‰Ð¸Ð¼Ð¸ÑÑ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸",alt:"ðŸ˜„"},{name:"ÑÐ¸ÑÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾ ÑÐ¾ ÑÐ¼ÐµÑŽÑ‰Ð¸Ð¼Ð¸ÑÑ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸",alt:"ðŸ˜"},{name:"Ñ…Ð¾Ñ…Ð¾Ñ‡ÑƒÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾ Ñ ÑÐ¾Ñ‰ÑƒÑ€ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸",alt:"ðŸ˜†"},{name:"Ð»Ð¸Ñ†Ð¾, ÐºÐ°Ñ‚Ð°ÑŽÑ‰ÐµÐµÑÑ Ð¿Ð¾ Ð¿Ð¾Ð»Ñƒ Ð¾Ñ‚ ÑÐ¼ÐµÑ…Ð°",alt:"ðŸ¤£"},{name:"Ð»Ð¸Ñ†Ð¾ ÑÐ¾ ÑÐ»ÐµÐ·Ð°Ð¼Ð¸ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸",alt:"ðŸ˜‚"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð»ÐµÐ³ÐºÐ¾Ð¹ ÑƒÐ»Ñ‹Ð±ÐºÐ¾Ð¹",alt:"ðŸ™‚"},{name:"Ð»Ð¸Ñ†Ð¾, Ð¿ÐµÑ€ÐµÐ²ÐµÑ€Ð½ÑƒÑ‚Ð¾Ðµ Ð²Ð²ÐµÑ€Ñ… Ð½Ð¾Ð³Ð°Ð¼Ð¸",alt:"ðŸ™ƒ"},{name:"Ð¿Ð¾Ð´Ð¼Ð¸Ð³Ð¸Ð²Ð°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜‰"},{name:"ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾",alt:"â˜ºï¸"},{name:"ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾ Ñ Ð½Ð¸Ð¼Ð±Ð¾Ð¼",alt:"ðŸ˜‡"},{name:"ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾ Ñ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ°Ð¼Ð¸",alt:"ðŸ¥°"},{name:"ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾ Ñ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸ Ð² Ð²Ð¸Ð´Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐµÐº",alt:"ðŸ˜"},{name:"Ð»Ð¸Ñ†Ð¾ ÑÐ¾ Ð·Ð²ÐµÐ·Ð´Ð°Ð¼Ð¸ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð³Ð»Ð°Ð·",alt:"ðŸ¤©"},{name:"Ð²Ð¾Ð·Ð´ÑƒÑˆÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ†ÐµÐ»ÑƒÐ¹",alt:"ðŸ˜˜"},{name:"Ñ†ÐµÐ»ÑƒÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜—"},{name:"Ñ†ÐµÐ»ÑƒÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾ Ñ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¼Ð¸ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸",alt:"ðŸ˜š"},{name:"ÑƒÐ»Ñ‹Ð±ÐºÐ° ÑÐºÐ²Ð¾Ð·ÑŒ ÑÐ»ÐµÐ·Ñ‹",alt:"ðŸ¥²"},{name:"Ð»Ð¸Ñ†Ð¾ ÑÐ¼Ð°ÐºÑƒÑŽÑ‰ÐµÐµ ÐµÐ´Ñƒ",alt:"ðŸ˜‹"},{name:"Ð»Ð¸Ñ†Ð¾, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ ÑÐ·Ñ‹Ðº",alt:"ðŸ˜›"},{name:"Ð¿Ð¾Ð´Ð¼Ð¸Ð³Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ ÑÐ·Ñ‹Ðº",alt:"ðŸ˜œ"},{name:"Ð´ÑƒÑ€Ð°Ñ‡Ð°Ñ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¤ª"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ ÑÐ¾Ñ‰ÑƒÑ€ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸ Ð¸ Ð²Ñ‹ÑÑƒÐ½ÑƒÑ‚Ñ‹Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼",alt:"ðŸ˜"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð´Ð¾Ð»Ð»Ð°Ñ€Ð°Ð¼Ð¸ Ð² Ð³Ð»Ð°Ð·Ð°Ñ…",alt:"ðŸ¤‘"},{name:"Ð¾Ð±Ð½Ð¸Ð¼Ð°ÑˆÐºÐ¸",alt:"ðŸ¤—"},{name:"Ð»Ð¸Ñ†Ð¾ Ð¿Ñ€Ð¸ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ñ€Ð¾Ñ‚ Ñ€ÑƒÐºÐ¾Ð¹",alt:"ðŸ¤­"},{name:"ÑˆÐ¸ÐºÐ°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¤«"},{name:"Ñ€Ð°Ð·Ð¼Ñ‹ÑˆÐ»ÑÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¤”"},{name:"Ñ€Ð¾Ñ‚ Ð½Ð° Ð·Ð°Ð¼ÐºÐµ",alt:"ðŸ¤"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð¿Ñ€Ð¸Ð¿Ð¾Ð´Ð½ÑÑ‚Ð¾Ð¹ Ð±Ñ€Ð¾Ð²ÑŒÑŽ",alt:"ðŸ¤¨"},{name:"Ð½ÐµÐ´Ð¾Ð²Ð¾Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜’"},{name:"Ð»Ð¸Ñ†Ð¾ Ð·Ð°ÐºÐ°Ñ‚Ð¸Ð²ÑˆÐµÐµ Ð³Ð»Ð°Ð·Ð°",alt:"ðŸ™„"},{name:"Ð³Ñ€Ð¸Ð¼Ð°ÑÐ½Ð¸Ñ‡Ð°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜¬"},{name:"Ð¾Ð±Ð¼Ð°Ð½Ñ‰Ð¸Ðº",alt:"ðŸ¤¥"},{name:"Ð»Ð¸Ñ†Ð¾, Ð¸ÑÐ¿Ñ‹Ñ‚Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ð¾Ð±Ð»ÐµÐ³Ñ‡ÐµÐ½Ð¸Ðµ",alt:"ðŸ˜Œ"},{name:"Ð¼ÐµÐ»Ð°Ð½Ñ…Ð¾Ð»Ð¸Ñ‡Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜ž"},{name:"ÑÐ¾Ð½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜ª"},{name:"Ð½ÐµÐ¹Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜"},{name:"Ð»Ð¸Ñ†Ð¾ Ð±ÐµÐ· Ñ€Ñ‚Ð°",alt:"ðŸ˜¶"},{name:"ÑƒÑ…Ð¼Ñ‹Ð»ÑÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜"},{name:"Ð»Ð¸Ñ†Ð¾, Ð¿ÑƒÑÐºÐ°ÑŽÑ‰ÐµÐµ ÑÐ»ÑŽÐ½Ð¸",alt:"ðŸ¤¤"},{name:"ÑÐ¿ÑÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜´"},{name:"Ð»Ð¸Ñ†Ð¾ Ð² Ð¼ÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¾Ð¹ Ð¼Ð°ÑÐºÐµ",alt:"ðŸ˜·"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ñ‚ÐµÑ€Ð¼Ð¾Ð¼ÐµÑ‚Ñ€Ð¾Ð¼",alt:"ðŸ¤’"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð¿Ð¾Ð²ÑÐ·ÐºÐ¾Ð¹ Ð½Ð° Ð³Ð¾Ð»Ð¾Ð²Ðµ",alt:"ðŸ¤•"},{name:"Ð»Ð¸Ñ†Ð¾, Ð¸ÑÐ¿Ñ‹Ñ‚Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ñ‚Ð¾ÑˆÐ½Ð¾Ñ‚Ñƒ",alt:"ðŸ¤¢"},{name:"Ð»Ð¸Ñ†Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ñ‚Ð¾ÑˆÐ½Ð¸Ñ‚",alt:"ðŸ¤®"},{name:"Ñ‡Ð¸Ñ…Ð°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¤§"},{name:"Ñ€Ð°ÑÐ¿Ð°Ñ€ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¥µ"},{name:"Ð·Ð°Ð¼ÐµÑ€Ð·ÑˆÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¥¶"},{name:"Ñ€Ð°ÑÑ‚ÐµÑ€ÑÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜•"},{name:"Ð½ÐµÑ‚Ñ€ÐµÐ·Ð²Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¥´"},{name:"Ð¾ÑˆÐµÐ»Ð¾Ð¼Ð»ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜µ"},{name:"Ð²Ð·Ñ€Ñ‹Ð² Ð¼Ð¾Ð·Ð³Ð°",alt:"ðŸ¤¯"},{name:"Ð¿Ñ€Ð°Ð·Ð´Ð½Ð¸Ðº",alt:"ðŸ¥³"},{name:"Ð»Ð¸Ñ†Ð¾ Ð² ÐºÐ¾Ð²Ð±Ð¾Ð¹ÑÐºÐ¾Ð¹ ÑˆÐ»ÑÐ¿Ðµ",alt:"ðŸ¤ "},{name:"ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑ‰ÐµÐµÑÑ Ð»Ð¸Ñ†Ð¾ Ð² ÑÐ¾Ð»Ð½Ñ†ÐµÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ñ‹Ñ… Ð¾Ñ‡ÐºÐ°Ñ…",alt:"ðŸ˜Ž"},{name:"ÑƒÐ¼Ð½Ð¸Ðº",alt:"ðŸ¤“"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð¼Ð¾Ð½Ð¾ÐºÐ»ÐµÐ¼",alt:"ðŸ§"},{name:"Ð¾Ð·Ð°Ð±Ð¾Ñ‡ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜Ÿ"},{name:"ÑÐ»ÐµÐ³ÐºÐ° Ð½Ð°Ñ…Ð¼ÑƒÑ€ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ™"},{name:"Ñ…Ð¼ÑƒÑ€Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"â˜¹ï¸"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¼ Ñ€Ñ‚Ð¾Ð¼",alt:"ðŸ˜®"},{name:"Ð¿Ñ€Ð¸Ñ‚Ð¸Ñ…ÑˆÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜¯"},{name:"ÑƒÐ´Ð¸Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜²"},{name:"Ð¿Ð¾ÐºÑ€Ð°ÑÐ½ÐµÐ²ÑˆÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜³"},{name:"ÑƒÐ¼Ð¾Ð»ÑÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¥º"},{name:"Ñ…Ð¼ÑƒÑ€Ð¾Ðµ Ð»Ð¸Ñ†Ð¾ Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¼ Ñ€Ñ‚Ð¾Ð¼",alt:"ðŸ˜¦"},{name:"ÑÑ‚Ñ€Ð°Ð´Ð°Ð»ÑŒÑ‡ÐµÑÐºÐ¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜§"},{name:"Ð¸ÑÐ¿ÑƒÐ³Ð°Ð½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜¨"},{name:"Ð²ÑÑ‚Ñ€ÐµÐ²Ð¾Ð¶ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜°"},{name:"Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾Ðµ, Ð½Ð¾ Ð¸ÑÐ¿Ñ‹Ñ‚Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ð¾Ð±Ð»ÐµÐ³Ñ‡ÐµÐ½Ð¸Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜¥"},{name:"Ð¿Ð»Ð°Ñ‡ÑƒÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜¢"},{name:"Ð³Ñ€Ð¾Ð¼ÐºÐ¾ Ñ€Ñ‹Ð´Ð°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜­"},{name:"Ð»Ð¸Ñ†Ð¾, ÐºÑ€Ð¸Ñ‡Ð°Ñ‰ÐµÐµ Ð¾Ñ‚ ÑÑ‚Ñ€Ð°Ñ…Ð°",alt:"ðŸ˜±"},{name:"ÑÐ¼ÑƒÑ‰ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜–"},{name:"ÑƒÐ¿Ð¾Ñ€ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜£"},{name:"Ñ€Ð°Ð·Ð¾Ñ‡Ð°Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜ž"},{name:"ÑƒÐ´Ñ€ÑƒÑ‡ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜“"},{name:"ÑƒÑ‚Ð¾Ð¼Ð»ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜©"},{name:"ÑƒÑÑ‚Ð°Ð»Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜«"},{name:"Ð·ÐµÐ²Ð°ÑŽÑ‰ÐµÐµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ¥±"},{name:"Ð»Ð¸Ñ†Ð¾ Ñ Ð¿Ð°Ñ€Ð¾Ð¼ Ð¸Ð· Ð½Ð¾Ð·Ð´Ñ€ÐµÐ¹",alt:"ðŸ˜¤"},{name:"Ð½Ð°Ð´ÑƒÑ‚Ð¾Ðµ Ð»Ð¸Ñ†Ð¾, ÐºÑ€Ð¸Ð²ÑÑ‰ÐµÐµ Ð³ÑƒÐ±Ñ‹",alt:"ðŸ˜¡"},{name:"Ð·Ð»Ð¾Ðµ Ð»Ð¸Ñ†Ð¾",alt:"ðŸ˜ "},{name:"Ð»Ð¸Ñ†Ð¾, Ð²Ñ‹Ñ€Ð°Ð¶Ð°ÑŽÑ‰ÐµÐµÑÑ Ð½ÐµÑ†ÐµÐ½Ð·ÑƒÑ€Ð½Ð¾",alt:"ðŸ¤¬"},{name:"ÐºÐ°ÐºÐ°ÑˆÐºÐ°",alt:"ðŸ’©"},{name:"Ñ‡ÐµÑ€Ñ‚Ð¸Ðº ÑÐ¾ Ð·Ð»Ñ‹Ð¼ Ð»Ð¸Ñ†Ð¾Ð¼",alt:"ðŸ‘¿"},{name:"ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑ‰Ð¸Ð¹ÑÑ Ñ‡ÐµÑ€Ñ‚ÐµÐ½Ð¾Ðº",alt:"ðŸ˜ˆ"},{name:"ÑÐ¼ÐµÑŽÑ‰Ð°ÑÑÑ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ°",alt:"ðŸ˜º"},{name:"Ñ…Ð¾Ñ…Ð¾Ñ‡ÑƒÑ‰Ð°Ñ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ° ÑÐ¾ ÑÐ¼ÐµÑŽÑ‰Ð¸Ð¼Ð¸ÑÑ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸",alt:"ðŸ˜¸"},{name:"ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ° ÑÐ¾ ÑÐ»ÐµÐ·Ð°Ð¼Ð¸ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸",alt:"ðŸ˜¹"},{name:"ÑÐ¼ÐµÑŽÑ‰Ð°ÑÑÑ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ° Ñ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸ Ð² Ð²Ð¸Ð´Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐµÐº",alt:"ðŸ˜»"},{name:"ÑƒÑ…Ð¼Ñ‹Ð»ÑÑŽÑ‰Ð°ÑÑÑ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ°",alt:"ðŸ˜¼"},{name:"ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ°, Ð¿Ð¾ÑÑ‹Ð»Ð°ÑŽÑ‰Ð°Ñ Ð¿Ð¾Ñ†ÐµÐ»ÑƒÐ¹",alt:"ðŸ˜½"},{name:"Ð¸Ð·ÑƒÐ¼Ð»ÐµÐ½Ð½Ð°Ñ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ°",alt:"ðŸ™€"},{name:"Ð¿Ð»Ð°Ñ‡ÑƒÑ‰Ð°Ñ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ°",alt:"ðŸ˜¿"},{name:"Ñ…Ð¼ÑƒÑ€Ð°Ñ ÐºÐ¾ÑˆÐ°Ñ‡ÑŒÑ Ð¼Ð¾Ñ€Ð´Ð¾Ñ‡ÐºÐ°",alt:"ðŸ˜¾"},{name:"Ð¾Ðº",alt:"ðŸ‘Œ"},{name:"Ð·Ð½Ð°Ðº Ð¿Ð¾Ð±ÐµÐ´Ñ‹",alt:"âœŒï¸"},{name:"ÑÐºÑ€ÐµÑ‰ÐµÐ½Ð½Ñ‹Ðµ Ð½Ð° ÑƒÐ´Ð°Ñ‡Ñƒ Ð¿Ð°Ð»ÑŒÑ†Ñ‹",alt:"ðŸ¤ž"},{name:"ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ð»ÐµÑ†, Ð¿Ð¾Ð´Ð½ÑÑ‚Ñ‹Ð¹ Ð²Ð²ÐµÑ€Ñ…",alt:"â˜ï¸"},{name:"Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¿Ð°Ð»ÐµÑ† Ð²Ð²ÐµÑ€Ñ…",alt:"ðŸ‘"},{name:"Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¿Ð°Ð»ÐµÑ† Ð²Ð½Ð¸Ð·",alt:"ðŸ‘Ž"},{name:"Ð°Ð¿Ð»Ð¾Ð´Ð¸ÑÐ¼ÐµÐ½Ñ‚Ñ‹",alt:"ðŸ‘"},{name:"Ñ€ÑƒÐºÐ¾Ð¿Ð¾Ð¶Ð°Ñ‚Ð¸Ðµ",alt:"ðŸ¤"}],Ie={class:"emojis__item"},Re=["aria-label"],De=r({__name:"EmojiItem",props:{emoji:null,index:null},setup(a){const s=a,e=c(!1),t=()=>e.value=!0,n=()=>e.value=!1,d=b(()=>`background-position: left -${s.index*(e.value?40:32)}px center`),h=b(()=>`Ð­Ð¼Ð¾Ð´Ð·Ð¸: ${s.emoji.name}`),y=L(K),f=L(I),v=g=>{y(g),f()};return(g,o)=>(l(),m("li",Ie,[u("button",{class:"emojis__btn","aria-label":_(h),style:H(_(d)),onMouseenter:t,onMouseleave:n,onFocus:t,onBlur:n,onClick:o[0]||(o[0]=w=>v(a.emoji.alt))},null,44,Re)]))}});const We={class:"emojis__list"},He=r({__name:"EmojiList",setup(a){return(s,e)=>(l(),m("ul",We,[(l(!0),m(S,null,F(_(Oe),(t,n)=>(l(),C(De,{key:n,emoji:t,index:n},null,8,["emoji","index"]))),128))]))}});const Fe=r({__name:"EmojiListCloseButton",setup(a){const s=L(I);return(e,t)=>(l(),m("div",null,[u("button",{onClick:t[0]||(t[0]=(...n)=>_(s)&&_(s)(...n)),"aria-label":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¾ÐºÐ½Ð¾ Ñ ÑÐ¼Ð¾Ð´Ð·Ð¸",class:"emojis__close"}," x ")]))}});const Je={key:0,class:"emojis"},Ke=r({__name:"EmojisContainer",setup(a){const s=c(!1),e=()=>s.value=!s.value,t=c(),n=()=>s.value=!1;return te(t,n),ne(t,n),O(I,n),(d,h)=>(l(),m("div",{ref_key:"emojisWindowRef",ref:t,class:"new-msg-form__emoji-block"},[i(Le,{isWindowOpened:s.value,onClicked:e},null,8,["isWindowOpened"]),i(J,null,{default:A(()=>[s.value?(l(),m("div",Je,[i(He),i(Fe)])):k("",!0)]),_:1})],512))}});function Ue(a,s,e){const t=c(!0);M(a,()=>{a.value.length&&n()});const n=()=>{t.value===!0&&(s==null||s.send(JSON.stringify({type:"user-typing",room:e==null?void 0:e.name,token:localStorage.token})),t.value=!1,setTimeout(()=>{t.value=!0},1e3))}}function Ve(a,s){const e=c(-1);return M(a,()=>{e.value>=0&&(s.value.textRef.selectionStart=e.value,s.value.textRef.selectionEnd=e.value,s.value.textRef.focus(),e.value=-1)}),e}const ze={class:"new-msg-form"},Pe=r({__name:"NewMessageContainer",props:{room:null,socket:null},setup(a){const s=a,e=c(""),t=c(),n=Ve(e,t);M(()=>s.socket,v=>{v&&Ue(e,s.socket,s.room)});const d=b(()=>e.value.length>0),h=v=>{e.value=v.trim()},y=()=>{var v,g;(g=s.socket)==null||g.send(JSON.stringify({type:"message",token:localStorage.token,message:e.value,room:(v=s.room)==null?void 0:v.name})),e.value=""};return O(K,v=>{const g=t.value.textRef.selectionStart;n.value=g+2;const o=e.value.slice(0,g)+v+e.value.slice(g);e.value=o}),(v,g)=>(l(),m("div",ze,[i(Te,{value:e.value,ref_key:"textareaRef",ref:t,onChanged:g[0]||(g[0]=o=>h(o))},null,8,["value"]),i(Ke),i(Se,{isActive:_(d),onClicked:y},null,8,["isActive"])]))}});function Ge(a,s){const e=c(!0);P(()=>{!e.value&&s.value&&(s.value.scrollTop=s.value.scrollHeight,e.value=!0)}),M(a,()=>{e.value=!1})}const qe=["onSubmit"],Qe=r({__name:"RoomPasswordFormContainer",props:{room:null,socket:null,isLoading:{type:Boolean},passwordError:null},emits:["loading","updated"],setup(a,{emit:s}){const e=a,t=c(""),n=b(()=>t.value.length>7&&!e.passwordError&&!e.isLoading),d=y=>{t.value=y,s("updated")},h=()=>{var y,f;s("loading",!0),(f=e.socket)==null||f.send(JSON.stringify({type:"user-joined",room:(y=e.room)==null?void 0:y.name,password:t.value,token:localStorage.token}))};return O(W,[t,d]),(y,f)=>(l(),m(S,null,[i(le,{title:"Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ð² ÑÑ‚Ð¾Ñ‚ Ñ‡Ð°Ñ‚ Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¼"}),i(oe),u("form",{onSubmit:G(h,["prevent"])},[i(Z,{title:"ÐŸÐ°Ñ€Ð¾Ð»ÑŒ",name:"password",injectionKey:_(W),error:a.passwordError},null,8,["injectionKey","error"]),i(ee,{title:"Ð’Ð¾Ð¹Ñ‚Ð¸",type:"submit",isFullWidth:"",isActive:_(n),isLoading:a.isLoading},null,8,["isActive","isLoading"])],40,qe)],64))}});function Xe(a,s,e,t,n,d,h,y){const{addNotification:f}=q();a.private||(e.value=!0),s.value=new WebSocket("ws://127.0.0.1:8090"),s.value.onopen=()=>{var v;s.value.onmessage=g=>{var w,T,N;const o=JSON.parse(g.data);if(o.type==="401")localStorage.removeItem("token"),localStorage.removeItem("user"),B.push("/enter");else if(o.type==="404")f("Ð§Ð°Ñ‚ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½","warning"),B.push("/");else if(o.type==="500")f("ÐžÑˆÐ¸Ð±ÐºÐ° Ð½Ð° ÑÑ‚Ð¾Ñ€Ð¾Ð½Ðµ ÑÐµÑ€Ð²ÐµÑ€Ð°","warning"),B.push("/");else if(o.type==="access-denied")y.value="ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ",e.value=!1;else if(o.type==="welcome")e.value=!1,t.value=o.messages,n.value=o.members;else if(o.type==="user-join"){n.value=o.members;const $="join-"+Date.now();t.value=(w=t.value)==null?void 0:w.concat({...o.message,id:$})}else if(o.type==="user-leave"){const $="leave-"+Date.now();t.value=(T=t.value)==null?void 0:T.concat({...o.message,id:$}),n.value=o.members}else if(o.type==="message-broadcast"){const $="msg-"+Date.now();t.value=(N=t.value)==null?void 0:N.concat({...o.message,id:$})}else o.type==="user-typing"&&(d.value=o.user,h.value=!0,setTimeout(()=>h.value=!1,1500))},a.private||(v=s.value)==null||v.send(JSON.stringify({type:"user-joined",room:a.name,token:localStorage.token,password:""}))}}const Ye={key:0,class:"typing__wrapper"},Ze={class:"typing__event"},ea=r({__name:"TypingComponent",props:{userTyping:null,isTyping:{type:Boolean}},setup(a){return(s,e)=>a.isTyping?(l(),m("div",Ye,[u("div",Ze,[u("span",null,x(a.userTyping)+" Ð¿ÐµÑ‡Ð°Ñ‚Ð°ÐµÑ‚",1)])])):k("",!0)}});const aa={key:0,class:"chat__messages chat__messages--empty"},sa={key:1,class:"chat__messages"},ta={key:2,class:"chat__messages chat__messages--empty"},na=u("span",null,"ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹",-1),la=[na],oa=r({__name:"RoomContainer",setup(a){const s=c(),e=Y(),t=c(),n=c(),d=c(),{makeApiCall:h,response:y}=ae(),f=c(!1),v=c(""),g=c(!1),o=c(""),w=c(),T=p=>f.value=p,N=()=>o.value="";Q(()=>{h({type:"GET",url:`/rooms/${e.params.slug}`})}),Ge(n,w),M(y,p=>{p!=null&&p.room&&(t.value=p.room,document.title=`Ð§Ð°Ñ‚ "${p.room.name}"`)}),M(t,p=>{p&&Xe(p,s,f,n,d,v,g,o)}),X(()=>{var p;return(p=s.value)==null?void 0:p.close()});const $=b(()=>{var p;return n.value?n.value.filter(E=>E.type==="message").length:(p=t.value)==null?void 0:p.messages});return(p,E)=>{var R;return l(),m(S,null,[i(_e,{room:t.value,members:d.value,msgNum:_($)},null,8,["room","members","msgNum"]),!t.value||!t.value.private&&f.value?(l(),m("div",aa,[i(se,{isColored:"",isLarge:""})])):k("",!0),(R=t.value)!=null&&R.private&&!n.value?(l(),m("div",sa,[i(Qe,{room:t.value,socket:s.value,isLoading:f.value,passwordError:o.value,onUpdated:N,onLoading:E[0]||(E[0]=U=>T(U))},null,8,["room","socket","isLoading","passwordError"])])):k("",!0),n.value&&!n.value.length?(l(),m("div",ta,la)):k("",!0),n.value&&n.value.length>0?(l(),m("div",{key:3,class:"chat__messages",ref_key:"windowRef",ref:w},[i(Ce,{messages:n.value,members:d.value},null,8,["messages","members"])],512)):k("",!0),i(J,{name:"msg"},{default:A(()=>[i(ea,{userTyping:v.value,isTyping:g.value},null,8,["userTyping","isTyping"])]),_:1}),i(Pe,{room:t.value,socket:s.value},null,8,["room","socket"])],64)}}});const va=r({__name:"RoomView",setup(a){return(s,e)=>(l(),C(V,{isFullWidth:"",isFullHeight:""},{default:A(()=>[i(oa)]),_:1}))}});export{va as default};
